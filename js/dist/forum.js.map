{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@xypp/flarum-answer-bounty/webpack/bootstrap","webpack://@xypp/flarum-answer-bounty/webpack/runtime/compat get default export","webpack://@xypp/flarum-answer-bounty/webpack/runtime/define property getters","webpack://@xypp/flarum-answer-bounty/webpack/runtime/hasOwnProperty shorthand","webpack://@xypp/flarum-answer-bounty/external root \"flarum.core.compat['common/app']\"","webpack://@xypp/flarum-answer-bounty/./src/common/index.ts","webpack://@xypp/flarum-answer-bounty/external root \"flarum.core.compat['forum/app']\"","webpack://@xypp/flarum-answer-bounty/external root \"flarum.core.compat['common/extend']\"","webpack://@xypp/flarum-answer-bounty/external root \"flarum.core.compat['common/utils/classList']\"","webpack://@xypp/flarum-answer-bounty/external root \"flarum.core.compat['forum/components/DiscussionComposer']\"","webpack://@xypp/flarum-answer-bounty/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@xypp/flarum-answer-bounty/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@xypp/flarum-answer-bounty/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@xypp/flarum-answer-bounty/external root \"flarum.core.compat['common/components/Button']\"","webpack://@xypp/flarum-answer-bounty/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@xypp/flarum-answer-bounty/./src/forum/components/BountyInput.tsx","webpack://@xypp/flarum-answer-bounty/./src/forum/addHeaderItem.tsx","webpack://@xypp/flarum-answer-bounty/external root \"flarum.core.compat['forum/utils/DiscussionControls']\"","webpack://@xypp/flarum-answer-bounty/external root \"flarum.core.compat['forum/components/CommentPost']\"","webpack://@xypp/flarum-answer-bounty/external root \"flarum.core.compat['common/Component']\"","webpack://@xypp/flarum-answer-bounty/./src/forum/components/BountyTip.tsx","webpack://@xypp/flarum-answer-bounty/external root \"flarum.core.compat['common/components/Badge']\"","webpack://@xypp/flarum-answer-bounty/external root \"flarum.core.compat['common/models/Discussion']\"","webpack://@xypp/flarum-answer-bounty/./src/forum/components/BountyAnswer.tsx","webpack://@xypp/flarum-answer-bounty/./src/forum/index.ts","webpack://@xypp/flarum-answer-bounty/./src/forum/addDiscussionAction.tsx","webpack://@xypp/flarum-answer-bounty/./src/forum/addBountyTip.tsx","webpack://@xypp/flarum-answer-bounty/./src/forum/addBadge.tsx","webpack://@xypp/flarum-answer-bounty/./src/forum/addBestAnswerBountyShow.tsx"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/app'];","import app from 'flarum/common/app';\n\napp.initializers.add('xypp/flarum-answer-bounty', () => {\n  console.log('[xypp/flarum-answer-bounty] Hello, forum and admin!');\n});\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/classList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/DiscussionComposer'];","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/Stream'];","import Modal, { IInternalModalAttrs } from 'flarum/common/components/Modal';\r\nimport Button from 'flarum/common/components/Button';\r\nimport Stream from 'flarum/common/utils/Stream';\r\nimport app from 'flarum/forum/app';\r\n\r\nexport default class BountyInput extends Modal<{ onselect: (money: number|null) => void, current?: number } & IInternalModalAttrs> {\r\n  money: Stream<number>;\r\n  oninit(vnode: any) {\r\n    super.oninit(vnode);\r\n    this.money = new Stream(this.attrs.current || 0);\r\n  }\r\n\r\n  className() {\r\n    return 'Modal Modal--small';\r\n  }\r\n\r\n  title() {\r\n    return app.translator.trans('xypp-answer-bounty.forum.modal.title');\r\n  }\r\n\r\n  content() {\r\n    return (\r\n      <div className=\"Modal-body\">\r\n        <div className=\"Form\">\r\n          <div className=\"Form-group\">\r\n            <label for=\"xypp-bounty-amount\">{app.translator.trans('xypp-answer-bounty.forum.modal.label')}</label>\r\n            <input id=\"xypp-bounty-amount\" required className=\"FormControl\" type=\"number\" step=\"any\" min=\"1\" bidi={this.money} />\r\n          </div>\r\n          <div className=\"Form-group\">\r\n            {Button.component(\r\n              {\r\n                className: 'Button Button--primary',\r\n                type: 'submit'\r\n              },\r\n              app.translator.trans('xypp-answer-bounty.forum.modal.submit')\r\n            )}\r\n            {Button.component(\r\n              {\r\n                className: 'Button Button--danger',\r\n                onclick: (()=>{\r\n                  this.attrs.onselect(null);\r\n                  app.modal.close();\r\n                }).bind(this),\r\n              },\r\n              app.translator.trans('xypp-answer-bounty.forum.modal.clear')\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  onsubmit(e: any) {\r\n    e.preventDefault();\r\n    this.attrs.onselect(this.money());\r\n    app.modal.close();\r\n  }\r\n}","import app from 'flarum/forum/app';\r\n\r\nimport { extend } from 'flarum/common/extend';\r\nimport classList from 'flarum/common/utils/classList';\r\nimport DiscussionComposer from 'flarum/forum/components/DiscussionComposer';\r\nimport ReplyComposer from 'flarum/forum/components/ReplyComposer';\r\nimport ComposerBody from 'flarum/forum/components/ComposerBody';\r\nimport Model from 'flarum/common/Model';\r\nimport BountyInput from './components/BountyInput';\r\n\r\nfunction makeComposerBountyInput(composer: ComposerBody) {\r\n    return () => {\r\n        app.modal.show(BountyInput, {\r\n            current: composer.composer.fields.bounty || 1,\r\n            onselect: (money: number | undefined) => {\r\n                if (!money)\r\n                    delete composer.composer.fields.bounty;\r\n                else\r\n                    composer.composer.fields.bounty = money;\r\n            }\r\n        });\r\n    };\r\n}\r\nexport const addToComposer = (composer: any) => {\r\n    extend(composer.prototype, 'headerItems', function (this: ComposerBody, items) {\r\n        const isQACurrent = !!(this.composer?.fields?.tags && this.composer.fields.tags.find((e: Model) => e.attribute<boolean>(\"isQnA\")));\r\n\r\n        if (isQACurrent) {\r\n            items.add(\r\n                'bounty',\r\n                <a className=\"ComposerBody-bounty\" onclick={makeComposerBountyInput(this)}>\r\n                    <span className={classList('BountyLabel', !this.composer.fields.bounty && 'none')}>\r\n                        {app.translator.trans(`xypp-answer-bounty.forum.composer.${this.composer?.fields?.bounty ? 'edit' : 'set'}`, {\r\n                            bounty: this.composer?.fields?.bounty\r\n                        })}\r\n                    </span>\r\n                </a>,\r\n                1\r\n            );\r\n        }\r\n    });\r\n\r\n    extend(composer.prototype, 'data', function (data) {\r\n        if (this.composer?.fields?.bounty) {\r\n            data.bounty = this.composer?.fields?.bounty;\r\n        }\r\n    });\r\n};\r\n\r\nexport default () => {\r\n    addToComposer(DiscussionComposer);\r\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/utils/DiscussionControls'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/CommentPost'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","import Component from \"flarum/common/Component\";\r\nimport app from \"flarum/forum/app\";\r\n\r\nexport default class BountyTip extends Component<{\r\n    number: number\r\n}> {\r\n    view(n: any) {\r\n        const moneyName = app.forum.attribute<string>('antoinefr-money.moneyname') || '[money]';\r\n\r\n        return <div className=\"BountyTip\">\r\n            <i class=\"fas fa-coins\"></i>\r\n            {app.translator.trans('xypp-answer-bounty.forum.tip', {\r\n                money: moneyName.replace('[money]', this.attrs.number + \"\"),\r\n                span: <span className=\"BountyTip-number\" />\r\n            })}\r\n        </div>\r\n    }\r\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Badge'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/Discussion'];","import Component from \"flarum/common/Component\";\r\nimport app from \"flarum/forum/app\";\r\n\r\nexport default class BountyAnswer extends Component<{\r\n    number: number\r\n}> {\r\n    view(n: any) {\r\n        const moneyName = app.forum.attribute<string>('antoinefr-money.moneyname') || '[money]';\r\n\r\n        return <span className=\"BountyBestAns\">\r\n            <i class=\"fas fa-coins\"></i>\r\n            {app.translator.trans('xypp-answer-bounty.forum.tip-ans', {\r\n                money: moneyName.replace('[money]', this.attrs.number + \"\"),\r\n                span: <span className=\"BountyTip-number\" />\r\n            })}\r\n        </span>\r\n    }\r\n}","import app from 'flarum/forum/app';\nimport addHeaderItem from './addHeaderItem';\nimport addDiscussionAction from './addDiscussionAction';\nimport addBountyTip from './addBountyTip';\nimport addBadge from './addBadge';\nimport addBestAnswerBountyShow from './addBestAnswerBountyShow';\n\napp.initializers.add('xypp/flarum-answer-bounty', () => {\n  addHeaderItem();\n  addDiscussionAction();\n  addBountyTip();\n  addBadge();\n  addBestAnswerBountyShow();\n});\n","import app from 'flarum/forum/app';\r\nimport DiscussionControls from 'flarum/forum/utils/DiscussionControls';\r\nimport { extend } from 'flarum/common/extend';\r\nimport Button from 'flarum/common/components/Button';\r\nimport BountyInput from './components/BountyInput';\r\n\r\nexport default function addDiscussionAction() {\r\n    extend(DiscussionControls, 'moderationControls', function (items, discussion) {\r\n        const discussionUser = discussion.user();\r\n        const discussionTags = discussion.tags();\r\n        const currentUser = app.session?.user;\r\n        let show = false;\r\n        if (!discussion.attribute(\"hasBestAnswer\") && discussionTags && discussionTags.find((e: any) => e.attribute(\"isQnA\")))\r\n            if (currentUser && discussionUser && currentUser.id() !== discussionUser.id()) {\r\n                if (discussion.attribute(\"xypp-answer-bounty-moderate\")) {\r\n                    show = true;\r\n                }\r\n            } else if (discussion.attribute(\"xypp-answer-bounty-use\")) {\r\n                show = true;\r\n            }\r\n\r\n        if (show) {\r\n            items.add('fingerprint-recorder-fingerprint', Button.component({\r\n                icon: 'fas fa-users-cog',\r\n                className: 'Button Button--link',\r\n                onclick: () => {\r\n                    app.modal.show(BountyInput, {\r\n                        current: discussion.attribute(\"bounty\") || 1,\r\n                        onselect: (money: number) => {\r\n                            discussion.save({\r\n                                bounty: money\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n            },\r\n                app.translator.trans('xypp-answer-bounty.forum.discussion.' + (discussion.attribute(\"bounty\") ? \"edit\" : \"set\"), {\r\n                    bounty: discussion.attribute(\"bounty\")\r\n                }))\r\n            )\r\n        }\r\n    });\r\n}","import app from 'flarum/forum/app';\r\nimport { extend } from 'flarum/common/extend';\r\nimport CommentPost from 'flarum/forum/components/CommentPost';\r\nimport BountyTip from './components/BountyTip';\r\n\r\nexport default function addBountyTip() {\r\n    extend(CommentPost.prototype, 'footerItems', function (items) {\r\n        const thisPost = this.attrs.post;\r\n        const discussion = thisPost.discussion();\r\n        const hasBounty = (!(discussion as any).hasBestAnswer()) && discussion.attribute('bounty');\r\n\r\n        if (hasBounty && thisPost.number() === 1 && !thisPost.isHidden()) {\r\n            items.add('bountyTip', <BountyTip number={discussion.attribute(\"bounty\")} />, 100000);\r\n        }\r\n    });\r\n}","import app from 'flarum/forum/app';\r\n\r\nimport { extend } from 'flarum/common/extend';\r\nimport Badge from 'flarum/common/components/Badge';\r\nimport DiscussionList from 'flarum/forum/components/DiscussionList';\r\nimport Discussion from 'flarum/common/models/Discussion';\r\n\r\nexport default () => {\r\n  extend(Discussion.prototype, 'badges', function (badges) {\r\n    if (this.attribute('bounty')) {\r\n      badges.add(\r\n        'bounty',\r\n        Badge.component({\r\n          type: 'bounty',\r\n          label: app.translator.trans('xypp-answer-bounty.forum.badge'),\r\n          icon: 'fas fa-coins',\r\n        }),\r\n        5\r\n      );\r\n    }\r\n  });\r\n};","import { extend } from \"flarum/common/extend\";\r\nimport Discussion from \"flarum/common/models/Discussion\";\r\nimport app from \"flarum/forum/app\";\r\nimport BountyAnswer from \"./components/BountyAnswer\";\r\n\r\nexport default function addBestAnswerBountyShow() {\r\n    extend((flarum.extensions['fof-best-answer'] as any).components.SelectBestAnswerItem.prototype, \"items\", function (items: any) {\r\n        if ((this.discussion as Discussion).attribute(\"sent_bounty\")) {\r\n            items.add(\"sent_bounty\", <BountyAnswer number={(this.discussion as Discussion).attribute(\"sent_bounty\")} />)\r\n        }\r\n    });\r\n}"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","flarum","core","compat","app","add","console","log","_setPrototypeOf","t","e","setPrototypeOf","bind","__proto__","_inheritsLoose","create","constructor","BountyInput","_Modal","_this","_len","arguments","length","args","Array","_key","apply","concat","money","_proto","oninit","vnode","this","Stream","attrs","current","className","title","trans","content","_this2","m","for","id","required","type","step","min","bidi","Button","onclick","onselect","close","onsubmit","preventDefault","Modal","makeComposerBountyInput","composer","show","fields","bounty","BountyTip","_Component","view","n","moneyName","attribute","class","replace","number","span","Component","BountyAnswer","DiscussionComposer","extend","items","_this$composer","_this$composer2","_this$composer3","tags","find","classList","data","_this$composer4","_this$composer5","DiscussionControls","discussion","_app$session","discussionUser","user","discussionTags","currentUser","icon","save","CommentPost","thisPost","post","hasBestAnswer","isHidden","Discussion","badges","Badge","label","extensions","components","SelectBestAnswerItem"],"sourceRoot":""}