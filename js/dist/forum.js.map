{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@xypp/flarum-answer-bounty/./src/common/index.ts","webpack://@xypp/flarum-answer-bounty/./src/forum/addBountyTip.tsx","webpack://@xypp/flarum-answer-bounty/./src/forum/addDiscussionAction.tsx","webpack://@xypp/flarum-answer-bounty/./src/forum/addHeaderItem.tsx","webpack://@xypp/flarum-answer-bounty/./src/forum/components/BountyInput.tsx","webpack://@xypp/flarum-answer-bounty/./src/forum/components/BountyTip.tsx","webpack://@xypp/flarum-answer-bounty/./src/forum/index.ts","webpack://@xypp/flarum-answer-bounty/external root \"flarum.core.compat['common/Component']\"","webpack://@xypp/flarum-answer-bounty/external root \"flarum.core.compat['common/app']\"","webpack://@xypp/flarum-answer-bounty/external root \"flarum.core.compat['common/components/Button']\"","webpack://@xypp/flarum-answer-bounty/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@xypp/flarum-answer-bounty/external root \"flarum.core.compat['common/extend']\"","webpack://@xypp/flarum-answer-bounty/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@xypp/flarum-answer-bounty/external root \"flarum.core.compat['common/utils/classList']\"","webpack://@xypp/flarum-answer-bounty/external root \"flarum.core.compat['forum/app']\"","webpack://@xypp/flarum-answer-bounty/external root \"flarum.core.compat['forum/components/CommentPost']\"","webpack://@xypp/flarum-answer-bounty/external root \"flarum.core.compat['forum/components/DiscussionComposer']\"","webpack://@xypp/flarum-answer-bounty/external root \"flarum.core.compat['forum/utils/DiscussionControls']\"","webpack://@xypp/flarum-answer-bounty/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@xypp/flarum-answer-bounty/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@xypp/flarum-answer-bounty/webpack/bootstrap","webpack://@xypp/flarum-answer-bounty/webpack/runtime/compat get default export","webpack://@xypp/flarum-answer-bounty/webpack/runtime/define property getters","webpack://@xypp/flarum-answer-bounty/webpack/runtime/hasOwnProperty shorthand","webpack://@xypp/flarum-answer-bounty/webpack/runtime/make namespace object","webpack://@xypp/flarum-answer-bounty/./forum.ts"],"sourcesContent":["import app from 'flarum/common/app';\n\napp.initializers.add('xypp/flarum-answer-bounty', () => {\n  console.log('[xypp/flarum-answer-bounty] Hello, forum and admin!');\n});\n","import app from 'flarum/forum/app';\r\nimport { extend } from 'flarum/common/extend';\r\nimport CommentPost from 'flarum/forum/components/CommentPost';\r\nimport BountyTip from './components/BountyTip';\r\n\r\nexport default function addBountyTip() {\r\n    extend(CommentPost.prototype, 'footerItems', function (items) {\r\n        const thisPost = this.attrs.post;\r\n        const discussion = thisPost.discussion();\r\n        const hasBounty = (!(discussion as any).hasBestAnswer()) && discussion.attribute('bounty');\r\n\r\n        if (hasBounty && thisPost.number() === 1 && !thisPost.isHidden()) {\r\n            items.add('bountyTip', <BountyTip number={discussion.attribute(\"bounty\")} />, 100000);\r\n        }\r\n    });\r\n}","import app from 'flarum/forum/app';\r\nimport DiscussionControls from 'flarum/forum/utils/DiscussionControls';\r\nimport { extend } from 'flarum/common/extend';\r\nimport Button from 'flarum/common/components/Button';\r\nimport BountyInput from './components/BountyInput';\r\n\r\nexport default function addDiscussionAction() {\r\n    extend(DiscussionControls, 'moderationControls', function (items, discussion) {\r\n        const discussionUser = discussion.user();\r\n        const currentUser = app.session?.user;\r\n        let show = false;\r\n        if (currentUser && discussionUser && currentUser.id() !== discussionUser.id()) {\r\n            if (discussion.attribute(\"xypp-answer-bounty-moderate\")) {\r\n                show = true;\r\n            }\r\n        } else if (discussion.attribute(\"xypp-answer-bounty-use\")) {\r\n            show = true;\r\n        }\r\n\r\n        if (show) {\r\n            items.add('fingerprint-recorder-fingerprint', Button.component({\r\n                icon: 'fas fa-users-cog',\r\n                className: 'Button Button--link',\r\n                onclick: () => {\r\n                    app.modal.show(BountyInput, {\r\n                        current: discussion.attribute(\"bounty\") || 1,\r\n                        onselect: (money: number) => {\r\n                            discussion.save({\r\n                                bounty: money\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n            },\r\n                app.translator.trans('xypp-answer-bounty.forum.discussion.' + (discussion.attribute(\"bounty\") ? \"edit\" : \"set\"), {\r\n                    bounty: discussion.attribute(\"bounty\")\r\n                }))\r\n            )\r\n        }\r\n    });\r\n}","import app from 'flarum/forum/app';\r\n\r\nimport { extend } from 'flarum/common/extend';\r\nimport classList from 'flarum/common/utils/classList';\r\nimport DiscussionComposer from 'flarum/forum/components/DiscussionComposer';\r\nimport ReplyComposer from 'flarum/forum/components/ReplyComposer';\r\nimport ComposerBody from 'flarum/forum/components/ComposerBody';\r\nimport Model from 'flarum/common/Model';\r\nimport BountyInput from './components/BountyInput';\r\n\r\nfunction makeComposerBountyInput(composer: ComposerBody) {\r\n    return () => {\r\n        app.modal.show(BountyInput, {\r\n            current: composer.composer.fields.bounty || 1,\r\n            onselect: (money: number | undefined) => {\r\n                if (!money)\r\n                    delete composer.composer.fields.bounty;\r\n                else\r\n                    composer.composer.fields.bounty = money;\r\n            }\r\n        });\r\n    };\r\n}\r\nexport const addToComposer = (composer: any) => {\r\n    extend(composer.prototype, 'headerItems', function (this: ComposerBody, items) {\r\n        const isQACurrent = !!(this.composer?.fields?.tags && this.composer.fields.tags.find((e: Model) => e.attribute<boolean>(\"isQnA\")));\r\n\r\n        if (isQACurrent) {\r\n            items.add(\r\n                'bounty',\r\n                <a className=\"ComposerBody-bounty\" onclick={makeComposerBountyInput(this)}>\r\n                    <span className={classList('BountyLabel', !this.composer.fields.bounty && 'none')}>\r\n                        {app.translator.trans(`xypp-answer-bounty.forum.composer.${this.composer?.fields?.bounty ? 'edit' : 'set'}`, {\r\n                            bounty: this.composer?.fields?.bounty\r\n                        })}\r\n                    </span>\r\n                </a>,\r\n                1\r\n            );\r\n        }\r\n    });\r\n\r\n    extend(composer.prototype, 'data', function (data) {\r\n        if (this.composer?.fields?.bounty) {\r\n            data.bounty = this.composer?.fields?.bounty;\r\n        }\r\n    });\r\n};\r\n\r\nexport default () => {\r\n    addToComposer(DiscussionComposer);\r\n};","import Modal, { IInternalModalAttrs } from 'flarum/common/components/Modal';\r\nimport Button from 'flarum/common/components/Button';\r\nimport Stream from 'flarum/common/utils/Stream';\r\nimport app from 'flarum/forum/app';\r\n\r\nexport default class BountyInput extends Modal<{ onselect: (money: number|null) => void, current?: number } & IInternalModalAttrs> {\r\n  money: Stream<number>;\r\n  oninit(vnode: any) {\r\n    super.oninit(vnode);\r\n    this.money = new Stream(this.attrs.current || 0);\r\n  }\r\n\r\n  className() {\r\n    return 'Modal Modal--small';\r\n  }\r\n\r\n  title() {\r\n    return app.translator.trans('xypp-answer-bounty.forum.modal.title');\r\n  }\r\n\r\n  content() {\r\n    return (\r\n      <div className=\"Modal-body\">\r\n        <div className=\"Form\">\r\n          <div className=\"Form-group\">\r\n            <label for=\"xypp-bounty-amount\">{app.translator.trans('xypp-answer-bounty.forum.modal.label')}</label>\r\n            <input id=\"xypp-bounty-amount\" required className=\"FormControl\" type=\"number\" step=\"any\" min=\"1\" bidi={this.money} />\r\n          </div>\r\n          <div className=\"Form-group\">\r\n            {Button.component(\r\n              {\r\n                className: 'Button Button--primary',\r\n                type: 'submit'\r\n              },\r\n              app.translator.trans('xypp-answer-bounty.forum.modal.submit')\r\n            )}\r\n            {Button.component(\r\n              {\r\n                className: 'Button Button--danger',\r\n                onclick: (()=>{\r\n                  this.attrs.onselect(null);\r\n                  app.modal.close();\r\n                }).bind(this),\r\n              },\r\n              app.translator.trans('xypp-answer-bounty.forum.modal.clear')\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  onsubmit(e: any) {\r\n    e.preventDefault();\r\n    this.attrs.onselect(this.money());\r\n    app.modal.close();\r\n  }\r\n}","import Component from \"flarum/common/Component\";\r\nimport app from \"flarum/forum/app\";\r\n\r\nexport default class BountyTip extends Component<{\r\n    number: number\r\n}> {\r\n    view(n: any) {\r\n        const moneyName = app.forum.attribute<string>('antoinefr-money.moneyname') || '[money]';\r\n\r\n        return <div className=\"BountyTip\">\r\n            <i class=\"fas fa-coins\"></i>\r\n            {app.translator.trans('xypp-answer-bounty.forum.tip', {\r\n                money: moneyName.replace('[money]', this.attrs.number + \"\"),\r\n                span: <span className=\"BountyTip-number\" />\r\n            })}\r\n        </div>\r\n    }\r\n}","import app from 'flarum/forum/app';\nimport addHeaderItem from './addHeaderItem';\nimport addDiscussionAction from './addDiscussionAction';\nimport addBountyTip from './addBountyTip';\n\napp.initializers.add('xypp/flarum-answer-bounty', () => {\n  addHeaderItem();\n  addDiscussionAction();\n  addBountyTip();\n});\n","module.exports = flarum.core.compat['common/Component'];","module.exports = flarum.core.compat['common/app'];","module.exports = flarum.core.compat['common/components/Button'];","module.exports = flarum.core.compat['common/components/Modal'];","module.exports = flarum.core.compat['common/extend'];","module.exports = flarum.core.compat['common/utils/Stream'];","module.exports = flarum.core.compat['common/utils/classList'];","module.exports = flarum.core.compat['forum/app'];","module.exports = flarum.core.compat['forum/components/CommentPost'];","module.exports = flarum.core.compat['forum/components/DiscussionComposer'];","module.exports = flarum.core.compat['forum/utils/DiscussionControls'];","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export * from './src/common';\nexport * from './src/forum';\n"],"names":["app","initializers","add","console","log","extend","CommentPost","BountyTip","addBountyTip","prototype","items","thisPost","attrs","post","discussion","hasBounty","hasBestAnswer","attribute","number","isHidden","m","DiscussionControls","Button","BountyInput","addDiscussionAction","_app$session","discussionUser","user","currentUser","session","show","id","component","icon","className","onclick","modal","current","onselect","money","save","bounty","translator","trans","classList","DiscussionComposer","makeComposerBountyInput","composer","fields","addToComposer","_this$composer","isQACurrent","tags","find","e","_this$composer2","_this$composer3","data","_this$composer4","_this$composer5","Modal","Stream","_Modal","_this","_len","arguments","length","args","Array","_key","call","apply","concat","_inheritsLoose","_proto","oninit","vnode","title","content","_this2","required","type","step","min","bidi","close","bind","onsubmit","preventDefault","default","Component","_Component","view","n","moneyName","forum","replace","span","addHeaderItem","setPrototypeOf","t","o","Object","create","constructor","_setPrototypeOf","__proto__"],"sourceRoot":""}